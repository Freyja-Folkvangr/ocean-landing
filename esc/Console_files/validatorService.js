define([],function(){"use strict";function Validator(){this.nameRe="/^[a-zA-Z0-9-_]*$/";this.roleNameRe1="/^[一-龥a-zA-Z_][一-龥a-zA-Z0-9_]{0,63}$/";this.descriptionRegAs="/^[ ]*[\\S\\s]{0,4096}[ ]*$/";this.descriptionRegAddAs="/^[^<>]{0,4096}$/";this.ChineseRe="/^[\\u4e00-\\u9fa5a-zA-Z0-9-_]*$/";this.extendName="/^(?!\\s)(?!.*?\\s$)[a-zA-Z0-9_.\\-\\s]*$/";this.desRe="/^[^<>]*$/";this.certContent="/^[-]{5}BEGIN CERTIFICATE[^<>]*[-]{5}END CERTIFICATE[^<>]*$/";this.privateKeyContent="/^[-]{5}BEGIN RSA[^<>]*[-]{5}END RSA[^<>]*$/";this.imageName="/^(?!\\s)(?!.*?\\s$)[a-zA-Z0-9_.\\-\\s]{1,128}$/";this.notEmpty="/^[\\S]*$/";this.nameRe="/^[a-zA-Z0-9_]{1,128}$/";this.VolumenameRe="^[a-zA-Z0-9_]*$";this.unixFilePathName="/^(/[\\w\\.]+)+$/";this.winFilePathName="/^[a-zA-Z]:(\\\\\\w+)+(\\.\\w+)?$/";this.letterNumber="/^[a-zA-Z0-9]+$/";this.ChineseRe="/^[\\u4e00-\\u9fa5a-zA-Z0-9-_]*$/";this.userNameRe="/^[a-zA-Z0-9_]{1,128}$/";this.descriptionRegAdd="/^[^<>]{0,1024}$/";this.phoneRe="((d{11})|^((d{7,8})|(d{4}|d{3})-(d{7,8})|(d{4}|d{3})-(d{7,8})-(d{4}|d{3}|d{2}|d{1})|(d{7,8})-(d{4}|d{3}|d{2}|d{1}))$)";this.macRe="^[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}$";this.appNameReg="/^[一-龥a-zA-Z0-9-_ \\(\\)\\[\\]\\#\\.]{1,256}$/";this.appNameForOpenstack="/^[A-Za-z_]{1}[A-Za-z0-9_]{0,254}$/";this.appNameForOpenstack1="/^[a-zA-Z]+[a-zA-Z0-9_.-]{0,254}$/";this.vmNameReg="/^[ ]*[A-Za-z0-9-_ 一-龥]{1,64}[ ]*$/";this.vmNameCreateReg="/^[ ]*[A-Za-z0-9-_ 一-龥]{1,56}[ ]*$/";this.vmNameCharReg="/^[ ]*[A-Za-z0-9-_ 一-龥]*[ ]*$/";this.serviceName="/^[a-zA-Z0-9_一-龥]{1,64}$/";this.vmNameOrEmptyReg="/^[ ]*[A-Za-z0-9-_ 一-龥]{0,64}[ ]*$/";this.computerNameReg="/^[ ]*[A-Za-z0-9-_]{1,13}[ ]*$/";this.computerNameCharReg="/^[A-Za-z0-9-]*$/";this.diskNameReg="/^[ ]*[A-Za-z0-9-_一-龥]{1,64}[ ]*$/";this.notAllSpaceReg="/^.*[^ ].*$/";this.snapshotName="/^[一-龥a-zA-Z\\-_0-9][一-龥a-zA-Z\\-_0-9 ]{0,63}$/";this.notAllNumReg="/^[0-9]*$/";this.descriptionReg="/^[ ]*[\\S\\s]{0,1024}[ ]*$/";this.approveOptionReg="/^[ ]*[\\S\\s]{0,4096}[ ]*$/";this.descriptionRegAdd="/^[^<>]{0,1024}$/";this.vmDetaiDescriptionReg="/^[ ]*[\\S\\s]{0,255}[ ]*$/";this.diskSnapshotDescReg="/^[ ]*[\\S\\s]{0,64}[ ]*$/";this.vmTagReg="/^[ ]*[一-龥A-Za-z0-9-_ \\(\\)\\[\\]\\#\\.\\+\\*=,]{0,256}[ ]*$/";this.orgNameRe="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,20}$/";this.vdcNameReg="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,64}$/";this.vdcNameCheck="/^(?![0-9])(?!op_)(?!shadow_)[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,64}$/";this.appName4Ict="/^[a-zA-Z][a-zA-Z0-9_.-]{0,254}$/";this.roleNameRe="/^[a-zA-Z0-9_]{1,20}$/";this.userNameRe="/^[a-zA-Z0-9_]{1,128}$/";this.fimUserNameRe="/^[a-zA-Z0-9_]{3,20}$/";this.maxLength="/^[A-Za-z0-9-_ 一-龥]{0,1024}$/";this.specialCharacter="/^([一-龥]|[0-9]|[,]|[，]|[“]){0,200}$/";this.descriptionFire="/^[\\u4E00-\\u9FA5A-Za-z0-9\\~\\\\.\\`\\!\\@\\#\\$\\%\\^\\*\\_\\+\\-\\=\\| ]*$/";this.noConstraintMaxLength="/^.{0,256}$/";this.noConstraintMaxLengthWrap="/^[\\s\\S]{0,1024}$/";this.cloudInfraNameRe="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,128}$/";this.cloudRegionNameRe="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,128}$/";this.templatesName="/^[0-9a-zA-Z \\_\\-]{0,64}$/";this.tempName="/^[一-龥A-Za-z0-9-_ ]*$/";this.vpcName="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,16}$/";this.name="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{1,64}$/";this.deviceName="/^[\\u4e00-\\u9fa5a-zA-Z_0-9]{0,256}$/";this.deviceName4Host="/^[\\u4e00-\\u9fa5a-zA-Z_0-9\\-]{0,256}$/";this.domainName="(^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(.[-a-zA-Z0-9]{1,63})*(.[-a-zA-Z0-9]{0,62}[a-zA-Z0-9])$)|(^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]$)|(^[a-zA-Z0-9]$)";this.upLinkPort="((^([0-9])+/([0-9])+/([0-9])+(,(([0-9])+/([0-9])+/([0-9])+))*$)|(^$))";this.ipv6Reg="^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*$";this.cifsDirReg=/^((\\\\(([1-9]|[1-9]\d|(10|11)\d|12[0-6]|12[8-9]|1[3-9]\d|2[0-1]\d|22[0-3])(\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3})){1})((((\\){1})([a-zA-Z0-9-_ .]{1,})){1,})$/;this.nfsDirReg=/^([1-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}:\/[\S.]+$/;this.DeviceName="(^/dev/xvd)[e-z]{1}$";this.DeviceNameRe="/(^/dev/xvd)[e-z]{1}$/";this.tenantIdReg=/^[0-9a-z]{32}$/;this.userNameReg=/^[a-zA-Z][a-zA-Z0-9_]{5,29}$/;this.nameReg=/^[a-zA-Z0-9_]{1,30}$/;this.dbPasswordCheck=/^[a-zA-Z][a-zA-Z0-9_]{5,29}$/;this.positiveIntegerReg=/^[1-9]\d*$/;this.modifyOrgQuota=/^[0-9]\d*$/;this.integerReg=/^(?:[1-9]\d*|0)$/;this.emailCheckReg=/(^$)|^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$/}var subRegRex=/\{\s*([^\|\}]+?)\s*(?:\|([^\}]*))?\s*\}/g;Validator.prototype.i18nReplace=function(s,o){return s.replace?s.replace(subRegRex,function(match,key){return angular.isUndefined(o[key])?match:o[key]}):s};Validator.prototype.maskValidator=function(ip){var data,ip_binary;try{data=ip.split(".");if(""==data[0]||""==data[1]||""==data[2]||""==data[3])return!1;data[0]=parseInt(data[0]);data[1]=parseInt(data[1]);data[2]=parseInt(data[2]);data[3]=parseInt(data[3]);if(0==data[0]&&0==data[1]&&0==data[2]&&0==data[3])return!1;if(data[3]>248)return!1;ip_binary=(data[0]+256).toString(2).substring(1)+(data[1]+256).toString(2).substring(1)+(data[2]+256).toString(2).substring(1)+(data[3]+256).toString(2).substring(1);return-1!=ip_binary.indexOf("01")?!1:!0}catch(e){return!1}};Validator.prototype.maskAndSubnetValidator=function(mask,ip){var maskData,ipData;try{maskData=mask.split(".");ipData=ip.split(".");return(parseInt(ipData[0])&parseInt(maskData[0]))==parseInt(ipData[0])&&(parseInt(ipData[1])&parseInt(maskData[1]))==parseInt(ipData[1])&&(parseInt(ipData[2])&parseInt(maskData[2]))==parseInt(ipData[2])&&(parseInt(ipData[3])&parseInt(maskData[3]))==parseInt(ipData[3])?!0:!1}catch(e){return!1}};Validator.prototype.ipv4Validator=function(ip,mask){var ipItem,ipStr,maskStr,j,i,tmpItem,tmpItemStr,len,ips,reg=/^(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d?)\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d?|0)\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d?|0)\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]\d?)$/i;if(!ip)return!0;if(!reg.test(ip))return!1;ipItem=[];ipStr="";maskStr="";ipItem=ip.split(".");for(j=0;32-mask>j;j++)maskStr+="1";for(i=0;i<ipItem.length;i++){tmpItem=parseInt(ipItem[i]).toString(2);tmpItemStr=tmpItem.toString();len=tmpItemStr.length;for(;8>len;){tmpItemStr="0"+tmpItemStr;len++}ipStr+=tmpItemStr}ips=ipStr.substr(mask,32-mask);return ips!==maskStr};Validator.prototype.subnetValidator=function(ip,mask,subnet){var maskArr,prefix,rest,index,restMask,ipData,maskData,subnetData;try{if(ip==subnet)return!1;if("number"==typeof mask){maskArr=[0,0,0,0];prefix=Math.floor(mask/8);rest=mask%8;index=0;for(index=0;prefix>index;index++)maskArr[index]=255;if(rest){restMask="11111111".substr(0,rest)+"00000000".substr(0,8-rest);maskArr[index]=parseInt(restMask,2)}mask=maskArr.join(".")}ipData=ip.split(".");maskData=mask.split(".");subnetData=subnet.split(".");return(parseInt(ipData[0])&parseInt(maskData[0]))==parseInt(subnetData[0])&&(parseInt(ipData[1])&parseInt(maskData[1]))==parseInt(subnetData[1])&&(parseInt(ipData[2])&parseInt(maskData[2]))==parseInt(subnetData[2])&&(parseInt(ipData[3])&parseInt(maskData[3]))==parseInt(subnetData[3])?!0:!1}catch(e){return!1}};Validator.prototype.ipv6Check=function(ip){if(!ip)return!1;if(ip.indexOf(".")>=0)return!1;var ipv6Reg=new RegExp(this.ipv6Reg);return ipv6Reg.test(ip)};Validator.prototype.ipValidator=function(ip){var data,i,ip1;try{data=ip.split(".");if(4==data.length){for(i=0;4>i;i++)if(""===data[i]||data[i]!==""+parseInt(data[i]))return!1;ip1=parseInt(data[0]);return 127===ip1?!1:!0}return!1}catch(e){return!1}};Validator.prototype.ipFormatCheck=function(ip){var data,i;try{data=ip.split(".");if(4==data.length){for(i=0;4>i;i++)if(""===data[i]||data[i]!==""+parseInt(data[i]))return!1;return!0}return!1}catch(e){return!1}};Validator.prototype.ipNotStartWith127=function(ip){var data,ip1;try{data=ip.split(".");if(4==data.length){ip1=parseInt(data[0]);if(127===ip1)return!1;return!0}return!1}catch(e){return!1}};Validator.prototype.ipRangeCheck=function(startIp,endIp,inputIp){var startIps,endIps,inputIps,i,startIpValue,endIpValue,inputIpValue;if(!startIp||!endIp||!inputIp)return!1;startIps=startIp.split(".");endIps=endIp.split(".");inputIps=inputIp.split(".");if(4!=startIps.length||4!=endIps.length||4!=inputIps.length)return!1;i=0;startIpValue=0;endIpValue=0;inputIpValue=0;for(i=0;4>i;i+=1){startIpValue=256*startIpValue+parseInt(startIps[i],10);endIpValue=256*endIpValue+parseInt(endIps[i],10);inputIpValue=256*inputIpValue+parseInt(inputIps[i],10)}return inputIpValue>=startIpValue&&endIpValue>=inputIpValue};Validator.prototype.getIpValue=function(inputIp){var inputIps,inputIpValue,i;if(!inputIp)return 0;inputIps=inputIp.split(".");if(4!=inputIps.length)return!1;inputIpValue=0;for(i=0;4>i;i++)inputIpValue=256*inputIpValue+parseInt(inputIps[i],10);return inputIpValue};Validator.prototype.ipCompare=function(startIp,endIp){var startIps,endIps,i,startIpValue,endIpValue;if(!startIp||!endIp)return!1;startIps=startIp.split(".");endIps=endIp.split(".");if(4!=startIps.length||4!=endIps.length)return!1;i=0;startIpValue=0;endIpValue=0;for(i=0;4>i;i+=1){startIpValue=256*startIpValue+parseInt(startIps[i],10);endIpValue=256*endIpValue+parseInt(endIps[i],10)}return endIpValue>=startIpValue};Validator.prototype.ipv6Validator=function(ip){if(!ip)return!1;var data=ip.split(":");return 8==data.length};Validator.prototype.checkMustContain=function(pwd){var reg1,reg2,reg3;try{reg1=/.*[A-Z]+.*/;reg2=/.*[a-z]+.*/;reg3=/.*[0-9]+.*/;if(!reg1.test(pwd)&&!reg2.test(pwd))return!1;if(!reg1.test(pwd)&&!reg3.test(pwd))return!1;if(!reg2.test(pwd)&&!reg3.test(pwd))return!1}catch(e){return!1}return!0};Validator.prototype.checkNotContain=function(pwd){var forbidLetter,len,index;if(!pwd)return!1;forbidLetter=" ~`#&*();\"'<>|\\";len=pwd.length;for(index=0;len>index;index++)if(forbidLetter.indexOf(pwd[index])>=0)return!1;return!0};Validator.prototype.checkComplexity=function(pwd){var forbidLetter,len,index,char,reg1,reg2,reg3,reg4,rate;if(!pwd)return!1;forbidLetter=" ~`#&*();\"'<>|\\";len=pwd.length;for(index=0;len>index;index++){char=pwd.charCodeAt(index);if(32>char||char>126)return!1;if(forbidLetter.indexOf(pwd[index])>=0)return!1}try{reg1=/.*[A-Z]+.*/;reg2=/.*[a-z]+.*/;reg3=/.*[0-9]+.*/;reg4=/[\!\@\$\%\^\-\_\=\+\[\{\}\]\:\,\.\/\?]+/;rate=0;reg1.test(pwd)&&rate++;reg2.test(pwd)&&rate++;reg3.test(pwd)&&rate++;reg4.test(pwd)&&rate++;return rate>=3}catch(e){return!1}};Validator.prototype.checkPwdSecLevel=function(pwd){var reg1,reg2,reg3,reg4,len,upper,down,number,spec;try{reg1=/[A-Z]/g;reg2=/[a-z]/g;reg3=/[0-9]/g;reg4=/[\!\@\$\%\^\-\_\=\+\[\{\}\]\:\,\.\/\?]/g;len=pwd.length>=8?pwd.length>=12?20:10:0;upper=reg1.test(pwd)?pwd.match(reg1).length>1?20:10:0;down=reg2.test(pwd)?pwd.match(reg2).length>1?20:10:0;number=reg3.test(pwd)?pwd.match(reg3).length>1?20:10:0;spec=reg4.test(pwd)?pwd.match(reg4).length>1?20:10:0;return upper+down+number+spec+len}catch(e){return 0}};Validator.prototype.checkMustContain4User=function(pwd){var reg1,reg2,reg3,reg4;try{reg1=/.*[A-Z]+.*/;reg2=/.*[a-z]+.*/;reg3=/.*[0-9]+.*/;reg4=/[\ \`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\\\|\[\{\}\]\;\:\'\"\,\<\.\>\/\?]+/;if(!reg1.test(pwd)&&!reg2.test(pwd))return!1;if(!reg1.test(pwd)&&!reg3.test(pwd))return!1;if(!reg1.test(pwd)&&!reg4.test(pwd))return!1;if(!reg2.test(pwd)&&!reg3.test(pwd))return!1;if(!reg2.test(pwd)&&!reg4.test(pwd))return!1;if(!reg3.test(pwd)&&!reg4.test(pwd))return!1}catch(e){return!1}return!0};Validator.prototype.checkContainContinuousCharacter=function(pwd){var reTest=/(.)(\1){2,}/;if(reTest.test(pwd))return!1;return!0};Validator.prototype.checkPasswordLength=function(pwd,minLength,maxLength){try{if(pwd.length<minLength||pwd.length>maxLength)return!1}catch(e){return!1}return!0};Validator.prototype.checkContainSpecialCharacter=function(pwd){return/[\ \`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\\\|\[\{\}\]\;\:\'\"\,\<\.\>\/\?]+/.test(pwd)};Validator.prototype.checkContainUserName=function(pwd,userName){try{if(!userName)return!1;var revertUserName=userName.split("").reverse().join("");if(pwd.indexOf(userName)>=0||pwd.indexOf(revertUserName)>=0)return!0}catch(e){return!1}return!1};Validator.prototype.checkContainSubUserName=function(pwd,userName){var index,sub;try{if(!userName&&userName.length<3)return!1;for(index=0;index<=userName.length-3;index++){sub=userName.substring(index,index+3);if(pwd.indexOf(sub)>=0)return!0}}catch(e){return!1}return!1};Validator.prototype.checkTenantIdsValid=function(tenantIdList){var index,length,tntId,tntIdReg;try{for(index=0,length=tenantIdList.length;length>index;index++){tntId=tenantIdList[index];tntIdReg=new RegExp(this.tenantIdReg);if(!tntIdReg.test(tntId))return!1}return!0}catch(e){return!1}return!1};Validator.prototype.checkDomValid=function(container,elements){var returnCode=!0,tmpReturn=!0,els=void 0===elements?container.find("[validator]"):elements,attrObj={};_.each(els,function(element){if("true"===$(element).attr("tiny-valid-disable"))return;if(_.keys(element.attrObj).length<=0)return;var isValidTip="false"===$(element).attr("isValidTip")?!1:!0,$elementTip=$(element),$elementValue=$(element.elementValue);UnifyValid._check($elementValue,$elementTip,element.attrObj,isValidTip,element.attrMsgObj,[$(element).attr("extendFunction")||""],element.tipposition,$elementValue[0].tipwidth)||(tmpReturn=!1);tmpReturn||(returnCode=!1);"true"===$(element).attr("hasValidTip")&&UnifyValid.clearValidate($(element));attrObj={}});tmpReturn||(returnCode=!1);return returnCode};return Validator});